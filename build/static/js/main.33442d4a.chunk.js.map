{"version":3,"sources":["components/Blog.js","services/blogs.js","services/login.js","components/BlogForm.js","components/Togglable.js","App.js","index.js"],"names":["Blog","blog","updateBlog","deleteBlog","useState","showFullInfo","setShowFullInfo","updateLike","event","a","preventDefault","id","removeBlog","window","confirm","title","author","user","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","style","className","onClick","url","likes","username","protoTypes","PropTypes","object","isRequired","func","baseUrl","process","token","getAll","axios","get","request","data","create","newObject","config","headers","Authorization","post","response","update","changedBlog","put","remove","delete","setToken","newToken","login","credentials","BlogForm","createBlog","setErrorMessage","newTitle","setNewTitle","newAuthor","setNewAuthor","newUrl","setNewUrl","addBlog","setTimeout","onSubmit","type","value","name","onChange","target","Togglable","React","forwardRef","props","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","displayName","Notification","message","App","blogs","setBlogs","errorMessage","setUsername","password","setPassword","setUser","useEffect","blogService","then","loggedUserJSON","localStorage","getItem","JSON","parse","handleLogin","loginService","setItem","stringify","blogObject","blogFormRef","current","returnedBlog","concat","updateLikes","map","userDeleting","console","log","filter","useRef","removeItem","blogList","sort","b","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.33442d4a.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Blog = ({ blog, updateBlog, deleteBlog }) => {\n  const [showFullInfo, setShowFullInfo] = useState(false)\n\n  const updateLike = async (event) => {\n    event.preventDefault()\n    updateBlog(blog.id, blog)\n  }\n  const removeBlog = async (event) => {\n    event.preventDefault()\n    if (window.confirm(`Remove blog ${blog.title} by ${blog.author}?`)) {\n      deleteBlog(blog.id, blog.user)\n    }\n\n\n  }\n\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 2,\n    marginBottom: 5\n  }\n  if (showFullInfo) {\n    return (\n      <div id='blog-id' style={blogStyle} className=\"blog\">\n        <div>\n          {blog.title} {blog.author}\n          <button onClick={() => setShowFullInfo(false)}>hide</button>\n          <div>\n            {blog.url}\n          </div>\n          <div>\n            likes {blog.likes} <button id='like-butt' onClick={updateLike}>like</button>\n          </div>\n          <div>\n            {blog.user.username}\n          </div>\n          <button id='remove-butt' onClick={removeBlog}>remove</button>\n\n        </div>\n\n      </div>\n    )\n  } else {\n    return (\n      <div style={blogStyle}>\n        <div>\n          {blog.title} {blog.author}\n          <button id='view-butt' onClick={() => setShowFullInfo(true)}>view</button>\n        </div>\n\n      </div>\n    )\n\n  }\n}\nBlog.protoTypes = {\n  blog: PropTypes.object.isRequired,\n  updateBlog: PropTypes.func.isRequired,\n  deleteBlog: PropTypes.func.isRequired\n}\nexport default Blog","import axios from 'axios'\nconst baseUrl = `${process.env.REACT_APP_BACKEND_URL}/api/blogs`\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = async () => {\n  const request = await axios.get(baseUrl)\n  return request.data\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst update = async (id, blog) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  const changedBlog = { ...blog, likes: blog.likes + 1 }\n  const response = await axios.put(`${baseUrl}/${id}`, changedBlog, config)\n  return response.data\n}\n\nconst remove = async (id) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\n  return response.data\n}\n\nexport default { getAll, create, update, remove, setToken }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nconst BlogForm = ({ createBlog, setErrorMessage }) => {\n  const [newTitle, setNewTitle] = useState('')\n  const [newAuthor, setNewAuthor] = useState('')\n  const [newUrl, setNewUrl] = useState('')\n\n  const addBlog = async (event) => {\n    event.preventDefault()\n    createBlog({\n      title: newTitle,\n      author: newAuthor,\n      url: newUrl\n    })\n    if (newTitle && newAuthor) {\n      setErrorMessage(\n        `A new blog '${newTitle}'' by ${newAuthor} was added`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n    setNewTitle('')\n    setNewAuthor('')\n    setNewUrl('')\n\n  }\n  return (\n    <form\n      id='form_id'\n      onSubmit={addBlog}>\n      <h2>Create new blog</h2>\n      <p>\n                title:\n        <input\n          id='title_id'\n          type=\"text\"\n          value={newTitle}\n          name=\"blog\"\n          onChange={({ target }) => setNewTitle(target.value)}\n        />\n      </p>\n      <p>\n                author:\n        <input\n          id='author_id'\n          type=\"text\"\n          value={newAuthor}\n          name=\"blog\"\n          onChange={({ target }) => setNewAuthor(target.value)}\n        />\n      </p>\n      <p>\n                url:\n        <input\n          id='url_id'\n          type=\"text\"\n          value={newUrl}\n          name=\"blog\"\n          onChange={({ target }) => setNewUrl(target.value)}\n        />\n      </p>\n      <button id='submit-butt' type=\"submit\">create</button>\n    </form>\n  )\n}\n\nBlogForm.propTypes = {\n  createBlog: PropTypes.func.isRequired,\n  setErrorMessage: PropTypes.func.isRequired\n}\nexport default BlogForm","import React, { useState, useImperativeHandle } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Togglable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      toggleVisibility\n    }\n  })\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  )\n})\nTogglable.displayName = 'Togglable'\n\nTogglable.propTypes = {\n  buttonLabel: PropTypes.string.isRequired\n}\n\nexport default Togglable\n","import React, { useState, useEffect, useRef } from 'react'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport BlogForm from './components/BlogForm'\nimport Togglable from './components/Togglable'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [blogs, setBlogs] = useState([])\n\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogsAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n      window.localStorage.setItem(\n        'loggedBlogsAppUser', JSON.stringify(user)\n      )\n      blogService.setToken(user.token)\n      setErrorMessage(\n        `${user.name} logged in `\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      setErrorMessage('wrong username or password')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const addBlog = async (blogObject) => {\n    blogFormRef.current.toggleVisibility()\n\n    const returnedBlog = await blogService\n      .create(blogObject)\n    setBlogs(blogs.concat(returnedBlog))\n  }\n\n  const updateLikes = async (id, blogObject) => {\n\n    const returnedBlog = await blogService\n      .update(id, blogObject)\n    setBlogs(blogs.map(blog => blog.id !== id ? blog : returnedBlog))\n  }\n\n  const deleteBlog = async (id, userDeleting) => {\n    console.log(userDeleting)\n    console.log((user))\n    try {\n      await blogService\n        .remove(id)\n      setBlogs(blogs.filter(blog => blog.id !== id))\n    } catch (exeption) {\n      setErrorMessage('not authorised to delete')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n\n    }\n  }\n\n  const loginForm = () => (\n    <form onSubmit={handleLogin}>\n      <div>\n        username\n        <input\n          id='username'\n          type=\"text\"\n          value={username}\n          name=\"Username\"\n          onChange={({ target }) => setUsername(target.value)}\n        />\n      </div>\n      <div>\n        password\n        <input\n          id='password'\n          type=\"password\"\n          value={password}\n          name=\"Password\"\n          onChange={({ target }) => setPassword(target.value)}\n        />\n      </div>\n      <button id='login-butt' type=\"submit\">login</button>\n    </form>\n  )\n\n  const blogList = () => {\n    const blogList = blogs.sort((a, b) => b.likes - a.likes)\n    return (\n      <div>\n        {blogList.map(blog =>\n          <Blog\n            key={blog.id}\n            blog={blog}\n            updateBlog={updateLikes}\n            deleteBlog={deleteBlog} />\n\n        )}\n      </div>\n    )\n  }\n\n  const blogFormRef = useRef()\n  const blogForm = () => (\n\n    <Togglable id='create-toggle' buttonLabel='Create Blog' ref={blogFormRef}>\n      <BlogForm createBlog={addBlog} setErrorMessage={setErrorMessage}\n      />\n    </Togglable>\n  )\n\n  return (\n    <div>\n      <Notification message={errorMessage} />\n\n      {user !== null ?\n        <div>\n          <h2>Blogs</h2>\n          <p>{user.name} logged in\n            <button onClick={() => window.localStorage.removeItem('loggedBlogsAppUser')}>logout</button>\n          </p>\n          {blogForm()}\n          {blogList()}\n        </div>\n        :\n        <div>\n          <h2>Login to app</h2>\n          {loginForm()}\n        </div>\n\n      }\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}